[1;1H[38;2;88;110;117m[48;2;0;43;54m  10 [38;2;82;123;210m[48;2;7;54;66mfunc[39m [38;2;41;140;186mmain[39m() {                                                                                                                                    [2;1H[38;2;88;110;117m[48;2;0;43;54m  11 [39m    [38;2;57;166;185mctx[39m, [38;2;57;166;185mcancel[39m := [38;2;57;166;185mcontext[39m.[38;2;41;140;186mWithCancel[39m([38;2;57;166;185mcontext[39m.[38;2;41;140;186mBackground[39m())                                                                                      [3;1H[38;2;88;110;117m  12 [39m    [38;2;82;123;210mdefer[39m [38;2;41;140;186mcancel[39m()                                                                                                                               [4;1H[38;2;88;110;117m  13 [39m                                                                                                                                                 [5;1H[38;2;88;110;117m  14 [39m    [38;2;57;166;185mmux[39m := [38;2;57;166;185mhttp[39m.[38;2;41;140;186mNewServeMux[39m()                                                                                                                    [6;1H[38;2;88;110;117m  15 [39m    [38;2;57;166;185mmux[39m.[38;2;41;140;186mHandleFunc[39m([38;2;42;161;152m"/hello"[39m, [38;2;82;123;210mfunc[39m([38;2;57;166;185mw[39m http.[38;2;38;139;210mResponseWriter[39m, [38;2;57;166;185mr[39m *http.[38;2;38;139;210mRequest[39m) {                                                                      [7;1H[38;2;88;110;117m  16 [39m        [38;2;57;166;185mw[39m.[38;2;41;140;186mHeader[39m().[38;2;41;140;186mSet[39m([38;2;42;161;152m"Content-Type"[39m, [38;2;42;161;152m"text/plain"[39m)                                                                                             [8;1H[38;2;88;110;117m  17 [39m        [38;2;57;166;185mfmt[39m.[38;2;41;140;186mFprintln[39m([38;2;57;166;185mw[39m, [38;2;42;161;152m"Hello, World!"[39m)                                                                                                         [9;1H[38;2;88;110;117m  18 [39m    })                                                                                                                                           [10;1H[38;2;88;110;117m  19 [39m                                                                                                                                                 [11;1H[38;2;88;110;117m  20 [39m    [38;2;57;166;185mserver[39m := &http.[38;2;38;139;210mServer[39m{                                                                                                                      [12;1H[38;2;88;110;117m  21 [39m        [38;2;57;166;185mAddr[39m:    [38;2;42;161;152m":8080"[39m,                                                                                                                        [13;1H[38;2;88;110;117m  22 [39m        [38;2;57;166;185mHandler[39m: [38;2;57;166;185mmux[39m,                                                                                                                            [14;1H[38;2;88;110;117m  23 [39m    }                                                                                                                                            [15;1H[38;2;88;110;117m  24 [39m                                                                                                                                                 [16;1H[38;2;88;110;117m  25 [39m    [38;2;82;123;210mgo[39m [38;2;82;123;210mfunc[39m() {                                                                                                                                  [17;1H[38;2;88;110;117m  26 [39m        [38;2;57;166;185mfmt[39m.[38;2;41;140;186mPrintln[39m([38;2;42;161;152m"Server is listening on port 8080..."[39m)                                                                                       [18;1H[38;2;88;110;117m  27 [39m        [38;2;82;123;210mif[39m [38;2;57;166;185merr[39m := [38;2;57;166;185mserver[39m.[38;2;41;140;186mListenAndServe[39m(); [38;2;57;166;185merr[39m != [38;2;65;151;137mnil[39m && [38;2;57;166;185merr[39m != [38;2;57;166;185mhttp[39m.[38;2;65;151;137mErrServerClosed[39m {                                                           [19;1H[38;2;88;110;117m  28 [39m            [38;2;57;166;185mfmt[39m.[38;2;41;140;186mPrintln[39m([38;2;42;161;152m"Error starting server:"[39m, [38;2;57;166;185merr[39m)                                                                                           [20;1H[38;2;88;110;117m  29 [39m        }                                                                                                                                        [21;1H[38;2;88;110;117m  30 [39m    }()                                                                                                                                          [22;1H[38;2;88;110;117m  31 [39m                                                                                                                                                 [23;1H[38;2;88;110;117m  32 [39m    <-[38;2;57;166;185mctx[39m.[38;2;41;140;186mDone[39m()                                                                                                                                 [24;1H[38;2;88;110;117m  33 [39m                                                                                                                                                 [25;1H[38;2;88;110;117m  34 [39m    [38;2;57;166;185mshutdownCtx[39m, [38;2;57;166;185mcancelShutdown[39m := [38;2;57;166;185mcontext[39m.[38;2;41;140;186mWithTimeout[39m([38;2;57;166;185mcontext[39m.[38;2;41;140;186mBackground[39m(), [38;2;203;75;22m5[39m*[38;2;57;166;185mtime[39m.[38;2;65;151;137mSecond[39m)                                                      [26;1H[38;2;88;110;117m  35 [39m    [38;2;82;123;210mdefer[39m [38;2;41;140;186mcancelShutdown[39m()                                                                                                                       [27;1H[38;2;88;110;117m  36 [39m                                                                                                                                                 [28;1H[38;2;88;110;117m  37 [39m    [38;2;82;123;210mif[39m [38;2;57;166;185merr[39m := [38;2;57;166;185mserver[39m.[38;2;41;140;186mShutdown[39m([38;2;57;166;185mshutdownCtx[39m); [38;2;57;166;185merr[39m != [38;2;65;151;137mnil[39m {                                                                                         [29;1H[38;2;88;110;117m  38 [39m        [38;2;57;166;185mfmt[39m.[38;2;41;140;186mPrintln[39m([38;2;42;161;152m"Error shutting down server:"[39m, [38;2;57;166;185merr[39m)                                                                                          [30;1H[38;2;88;110;117m  39 [39m    } [38;2;82;123;210melse[39m {                                                                                                                                     [31;1H[38;2;136;136;136m[48;2;7;54;66m/home/andy/dev/zi/zi-term/tests/zi-term/testdata/main.go:10:0                                                                                         [32;1H[48;2;0;43;54m-- NORMAL --                                                                                                                                          [39m[49m[59m[0m[?25h[1;6H